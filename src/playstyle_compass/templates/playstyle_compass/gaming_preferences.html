{% extends "base.html" %}
{% load static %}

{% block page_header %}
<h3>PERSONALIZE YOUR PLAYSTYLE</h3>
{% endblock page_header %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/playstyle_compass/gaming_prefs.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'css/playstyle_compass/common_styles.css' %}">

<form method="post" action="{% url 'playstyle_compass:update_preferences' %}" id="preferences-form">
  {% csrf_token %}
  <!-- Gaming history -->
  <div class="section">
    <label for="gaming_history" class="form-label">Gaming History:</label>
    <input type="text" id="gaming_history" name="gaming_history" class="form-control" value="{{ user_preferences.gaming_history }}" pattern="[A-Za-z0-9\s]+" title="Only letters and numbers are allowed">
  </div>

  <!-- Favorite Genres -->
  <div class="section">
    <fieldset>
      <legend class="form-label">Favorite Genres (Select up to 3):</legend>
      <div>
        {% for genre in genres %}
        <label>
          <input type="checkbox" name="favorite_genres" value="{{ genre }}" {% if genre in user_preferences.favorite_genres %}checked{% endif %}>
          {{ genre }}
        </label>
        {% endfor %}
      </div>
    </fieldset>
  </div>

  <!-- Preffered Platforms -->
  <div class="section">
    <fieldset>
      <legend class="form-label">Preferred Platforms (Select up to 3):</legend>
      <div>
        {% for platform in platforms %}
        <label>
          <input type="checkbox" name="platforms" value="{{ platform }}" {% if platform in user_preferences.platforms %}checked{% endif %}>
          {{ platform }}
        </label>
        {% endfor %}
      </div>
    </fieldset>
  </div>

  <div class="warnings">
    <p class="warning" id="history-warning">Please provide at least one game that you have played.</p>
    <p class="warning" id="genre-warning">Please select at least one genre.</p>
    <p class="warning" id="platform-warning">Please select at least one platform.</p>
  </div>

  <input class="btn btn-primary" type="submit" value="Update Preferences" id="update-button">
</form>

<script src="{% static 'js/gaming_preferences.js' %}"></script>

{% endblock content %}
